# 导航侧边栏使用指南

## 📋 概述

导航侧边栏是参考"高级搜索"功能设计的右侧边栏导航，提供更宽阔、更方便的导航体验。

## ✨ 主要特性

### 1. **右侧边栏设计** 📱
- 固定在页面右侧，宽度 380px
- 与高级搜索样式统一
- 点击"导航 ▶"按钮打开
- 点击外部区域或 ESC 键关闭

### 2. **三个标签页** 📑
- **时间线**: 垂直时间轴展示年月
- **渠道**: 标签云形式展示渠道
- **收藏**: 快速访问收藏内容

### 3. **时间线导航** 📅
- 按年份分组显示
- 垂直时间轴设计
- 显示每月推文数量
- 点击月份直接跳转

### 4. **渠道标签云** 🏷️
- 标签云形式展示
- 根据数量动态调整标签大小
- 实时搜索过滤
- 显示渠道推文数量

### 5. **收藏功能** ⭐
- 收藏常用年月或渠道
- 本地存储，刷新不丢失
- 快速访问收藏内容
- 支持删除收藏

### 6. **快捷功能** 🚀
- **今天**: 快速跳转到当前月份
- **随机**: 随机浏览历史内容

## 🎨 设计特点

### 视觉风格
- 渐变色主题，与高级搜索统一
- 卡片式布局，层次分明
- 悬停动效，交互反馈良好
- 时间轴线，清晰展示脉络

### 响应式设计
- 桌面端：固定右侧，380px 宽度
- 移动端：全屏覆盖
- 流畅的动画过渡

### 主题支持
- 自动适配白色/黑色主题
- 渐变色根据主题自动调整
- 保持整体风格一致

## 🚀 使用方法

### 打开导航侧边栏

点击顶部搜索栏中的"**导航 ▶**"按钮即可打开导航侧边栏。

### 关闭导航侧边栏

以下方式可以关闭：
1. 点击右上角 **×** 按钮
2. 点击侧边栏外部区域
3. 按 **ESC** 键

### 时间线导航

1. 打开导航侧边栏
2. 默认显示"时间线"标签页
3. 展开的年份显示月份节点
4. 点击月份卡片跳转到对应推文
5. 点击 ⭐ 添加/取消收藏

### 渠道导航

1. 点击"渠道"标签页
2. 在搜索框输入关键词过滤渠道
3. 点击渠道标签跳转到对应推文
4. 点击 ⭐ 添加/取消收藏

### 收藏功能

#### 添加收藏
1. 在时间线或渠道标签页中
2. 点击任意卡片上的 ⭐ 按钮
3. 按钮变为 ★ 表示已收藏

#### 查看收藏
1. 点击"收藏"标签页
2. 查看所有收藏的年月和渠道
3. 点击收藏项直接跳转

#### 删除收藏
1. 在收藏标签页中
2. 点击收藏项的 ✕ 按钮
3. 确认删除

### 快捷功能

#### 今天
- 点击底部"**📅 今天**"按钮
- 自动跳转到当前月份

#### 随机
- 点击底部"**🎲 随机**"按钮
- 随机跳转到一个月份

## 📱 移动端使用

移动端侧边栏会占满整个屏幕：
- 宽度调整为 100%
- 按钮和字体适当缩小
- 保持流畅的动画效果

## 🔄 与原有导航对比

| 特性 | 原有导航 | 导航侧边栏 |
|------|----------|-----------|
| 位置 | 嵌入搜索栏下拉 | 右侧固定边栏 |
| 宽度 | 受限（200px） | 宽阔（380px）|
| 形式 | 树形下拉 | 时间线 + 标签云 |
| 交互 | 树形展开 | 卡片点击 |
| 视觉 | 简单列表 | 渐变色卡片 |
| 收藏 | 无 | 有 |
| 搜索过滤 | 无 | 有 |
| 快捷功能 | 无 | 有 |
| 关闭方式 | 点击外部 | 点击外部 + ESC |

## 💾 数据存储

收藏数据存储在浏览器的 `localStorage` 中：
- **存储键**: `tweet_favorites`
- **数据格式**: JSON 数组

收藏数据结构：
```javascript
[
  {
    "type": "month",  // "month" 或 "channel"
    "year": "2024",
    "month": "12"
  },
  {
    "type": "channel",
    "channel": "微博"
  }
]
```

## 🎯 使用建议

1. **初次使用**: 先浏览时间线，熟悉内容分布
2. **常用收藏**: 将经常访问的月份或渠道收藏起来
3. **快速查找**: 使用渠道搜索功能快速定位
4. **随机浏览**: 使用随机功能发现历史内容
5. **桌面使用**: 充分利用 380px 的宽阔空间
6. **移动使用**: 注意侧边栏会占满屏幕

## ⚙️ 技术细节

### 文件结构

```
Twitter-pywebview/
├── modules/
│   └── navigationSidebar.js     # 导航侧边栏逻辑
├── styles/
│   └── navigationSidebar.css     # 导航侧边栏样式
├── index.html                    # 主页面（已添加侧边栏 HTML）
├── scripts.js                    # 主入口（已初始化新导航）
└── backend/
    └── database.py               # 数据库（已优化渠道统计）
```

### 模块导出

```javascript
// navigationSidebar.js 导出
export function openNavigationSidebar()      // 打开导航侧边栏
export function closeNavigationSidebar()     // 关闭导航侧边栏
export function initNavigationSidebar()       // 初始化导航侧边栏
```

### API 调用

- 获取年月数据: `GET /api/year-months`
- 获取渠道数据: `GET /api/channels`
- 年月分页: `GET /api/year-month/{year}/{month}/page`
- 渠道分页: `GET /api/channel/{channel}/page`

## 🎨 自定义

### 修改侧边栏宽度

在 `styles/navigationSidebar.css` 中修改：

```css
#navigation-sidebar {
    width: 380px;  /* 修改为想要的宽度 */
}
```

### 修改主题色

```css
/* 白色主题 */
.year-badge {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* 黑色主题 */
body.theme-black .year-badge {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
}
```

### 调整动画时长

```css
#navigation-sidebar {
    transition: transform 0.3s ease;  /* 调整 0.3s */
}
```

## 💡 使用技巧

### 快捷键
- **ESC**: 关闭导航侧边栏
- **点击外部**: 也可以关闭侧边栏

### 搜索渠道
在渠道标签页的搜索框输入关键词，实时过滤渠道。

### 批量收藏
可以收藏多个月份或渠道，方便快速切换。

### 组合使用
- 收藏常用月份 → 快速访问
- 随机浏览 → 发现新内容
- 今天快捷 → 查看最新

## 🐛 故障排除

### 导航按钮没有反应
- 检查浏览器控制台是否有错误
- 刷新页面重试
- 确认 `navigationSidebar.js` 已正确加载

### 侧边栏不显示
- 确认 CSS 文件已正确引入
- 检查 `navigation-sidebar` 元素是否存在
- 清除浏览器缓存重试

### 收藏功能不工作
- 检查浏览器是否允许 localStorage
- 清除 localStorage 后重新收藏
- 检查是否有隐私模式限制

### 样式错乱
- 确认 CSS 文件路径正确
- 检查是否与其他样式冲突
- 尝试清除浏览器缓存

## 📝 更新日志

### v1.0.0 (2026-01-10)
- ✨ 新增右侧边栏导航
- ✨ 新增时间线视图
- ✨ 新增渠道标签云
- ✨ 新增收藏功能
- ✨ 新增快捷功能（今天/随机）
- 🎨 参考高级搜索样式设计
- 📱 支持响应式设计
- 🌓 支持白色/黑色主题

## 📄 相关文档

- `improved_navigation_guide.md` - 改进导航功能指南（左侧侧边栏版本）
- `navigation_preview.html` - 左侧侧边栏预览页面

---

**创建时间**: 2026-01-10
**版本**: 1.0.0
**作者**: Craft Assistant
